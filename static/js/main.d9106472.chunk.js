(this["webpackJsonpmilano-fe"]=this["webpackJsonpmilano-fe"]||[]).push([[0],{14:function(e){e.exports=JSON.parse('{"fe":{"__ip_apiserver":"localhost","_ip_apiserver":"192.168.0.23","ip_apiserver":"15.165.143.42","port_apiserver":8080}}')},75:function(e,a,t){e.exports=t(89)},80:function(e,a,t){},83:function(e,a,t){},89:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(9),l=t.n(c),o=(t(80),t(56)),s=t.n(o),i=t(65),u=t(16),m=t(142),p=t(144),f=t(146),d=t(147),h=t(155),g=t(149),E=t(148),v=t(162),b=t(156),w=t(151),y=t(169),S=t(153),O=t(150),_=t(163),k=t(157),j=t(37),x=t(152),N=t(165),W=t(166),C=t(154),z=t(92),J=t(168),I=t(160),P=t(164),T=t(167),L=t(158),R=t(159),D=t(66),A=t.n(D),B=t(161),F=t(14),M=(t(82),t(83),"http://".concat(F.fe.ip_apiserver,":").concat(F.fe.port_apiserver,"/preset/preset0.jpg")),U="http://".concat(F.fe.ip_apiserver,":").concat(F.fe.port_apiserver,"/preset/preset1.jpg"),X=Object(m.a)((function(e){return{root:{minWidth:275,marginTop:10},image:{textAlign:"center"},media:{height:0,paddingTop:"56.25%"},avatar:{width:e.spacing(20),height:e.spacing(20)},avatarSm:{width:e.spacing(7),height:e.spacing(7)},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular}}}));var $=function(){var e=X(),a=r.a.useState("m"),t=Object(u.a)(a,2),c=t[0],l=t[1],o=r.a.useState("a"),m=Object(u.a)(o,2),D=m[0],$=m[1],q=r.a.useState(),G=Object(u.a)(q,2),H=G[0],K=G[1],Q=r.a.useState([]),V=Object(u.a)(Q,2),Y=V[0],Z=V[1],ee=r.a.useState(!1),ae=Object(u.a)(ee,2),te=ae[0],ne=ae[1],re=r.a.useState("preset0"),ce=Object(u.a)(re,2),le=ce[0],oe=ce[1],se=r.a.useState(),ie=Object(u.a)(se,2),ue=ie[0],me=ie[1],pe=r.a.useState([]),fe=Object(u.a)(pe,2),de=fe[0],he=fe[1],ge=r.a.useState(0),Ee=Object(u.a)(ge,2),ve=Ee[0],be=Ee[1],we=r.a.useState(""),ye=Object(u.a)(we,2),Se=ye[0],Oe=ye[1],_e=Object(n.useRef)(null),ke=Object(n.useRef)(Date.now()),je=Object(n.useRef)([]),xe=function(){for(var e,a=arguments.length,t=new Array(a),n=0;n<a;n++)t[n]=arguments[n];(e=console).log.apply(e,t),je.current.push(t.join(" "))},Ne=function(e){xe("ws connecting"),_e.current=new WebSocket("ws://".concat(F.fe.ip_apiserver,":").concat(F.fe.port_apiserver)),_e.current.onmessage=function(e){var a=Date.now();xe(e.data),ne(!1);try{var t=JSON.parse(e.data);if(null==t.time_start&&(t.time_start=ke.current),t.time_end=a,t.ok){Z(t.data);var n=Object.keys(t).reduce((function(e,a){try{a.startsWith("time_")&&e.push([a,""!==t[a]?parseInt(t[a]):0])}catch(n){console.log("parseInt error",n)}return e}),[]);n.sort((function(e,a){return e[1]-a[1]})),n.forEach((function(e){xe("[timestamps]",e[0],e[1])}));var r=(n=n.filter((function(e){return 0!==e[1]})))[n.length-1][1]-n[0][1];xe("[total]",r);var c=[];n.reduce((function(e,a){return c.push(a[1]-e),a[1]}),n[0]),c.shift(),c.forEach((function(e){xe(new Date(e).toISOString().split("T")[1],e,"ms")})),he(c.map((function(e){return[e,e/r*100]}))),be(r)}else xe("[ok]",t.ok,t.data)}catch(l){xe("[error]",JSON.stringify(l,null,2))}Oe(je.current)},_e.current.onclose=function(e){xe("ws on close")},_e.current.onopen=function(a){xe("ws on open"),e&&e()},_e.current.onerror=function(e){xe("on error"),xe(JSON.stringify(e,null,2))}};Object(n.useEffect)((function(){return Ne(),function(){return _e.current.close()}}),[]);var We=function(){var e=Object(i.a)(s.a.mark((function e(){var a,t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ke.current=Date.now(),je.current=[],Oe([]),Z([]),be(0),he([]),ne(!0),(a=new FormData).append("size",c),a.append("pose",D),"custom"===le&&a.append("image",H),a.append("face",le),a.append("time_start",ke.current),xe("handle","submit"),e.prev=14,e.next=17,fetch("http://".concat(F.fe.ip_apiserver,":").concat(F.fe.port_apiserver,"/api/v1/simple"),{method:"POST",body:a});case 17:if(!(t=e.sent).ok){e.next=26;break}return e.next=21,t.json();case 21:n=e.sent,xe("[response]",JSON.stringify(n,null,2)),n.ok&&(_e.current.readyState!==WebSocket.OPEN?(xe("ws not open"),_e.current.close(),Ne((function(){_e.current.send(JSON.stringify({id:n.id}))}))):_e.current.send(JSON.stringify({id:n.id}))),e.next=28;break;case 26:xe("res.ok",t.ok),ne(!1);case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(14),xe("[error]",JSON.stringify(e.t0,null,2)),ne(!1);case 34:case"end":return e.stop()}}),e,null,[[14,30]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"App"},r.a.createElement(p.a,null),r.a.createElement(f.a,{maxWidth:"lg"},r.a.createElement(d.a,{className:e.root},r.a.createElement(E.a,{avatar:r.a.createElement(J.a,{className:e.avatarSm,src:"custom"===le?ue:"preset0"===le?M:U}),title:"Options",subheader:"Select options"}),r.a.createElement(g.a,null,r.a.createElement(P.a,{display:"flex",flexWrap:"wrap"},r.a.createElement(P.a,{width:"50%"},r.a.createElement(O.a,{className:e.formControl,id:"size",disabled:!0},r.a.createElement(w.a,{id:"label-cloth-size"},"Cloth size"),r.a.createElement(_.a,{labelId:"label-cloth-size",id:"select-cloth-size",value:c,onChange:function(e){console.log("handle","cloth size",e.target.value),l(e.target.value)}},r.a.createElement(y.a,{value:"m"},"M"),r.a.createElement(y.a,{value:"l"},"L"),r.a.createElement(y.a,{value:"xl"},"XL")),r.a.createElement(S.a,null,"Cloth size : M/L/XL"))),r.a.createElement(P.a,{width:"50%"},r.a.createElement(O.a,{className:e.formControl,id:"pose",disabled:!0},r.a.createElement(w.a,{id:"label-pose"},"Pose"),r.a.createElement(_.a,{labelId:"label-pose",id:"select-pose",value:D,onChange:function(e){console.log("handle","pose",e.target.value),$(e.target.value)}},r.a.createElement(y.a,{value:"a"},"A pose"),r.a.createElement(y.a,{value:"t"},"T pose")),r.a.createElement(S.a,null,"Pose : T pose/A Pose"))))),r.a.createElement(g.a,null,r.a.createElement(O.a,{className:e.formControl,id:"file"},r.a.createElement(z.a,{component:"legend"},"Face"),r.a.createElement(W.a,{"aria-label":"gender",name:"gender1",value:le,onChange:function(e){console.log("handle","use custom"),console.log(e.target.value),oe(e.target.value),"custom"!==le&&me(null)}},r.a.createElement(P.a,{display:"flex",flexWrap:"wrap"},r.a.createElement(P.a,{mr:2},r.a.createElement(C.a,{value:"preset0",control:r.a.createElement(N.a,null),label:"Preset 0"}),r.a.createElement(J.a,{variant:"preset0"===le?"rounded":"circle",alt:"preset0",src:M,className:e.avatar})),r.a.createElement(P.a,{mr:2},r.a.createElement(C.a,{value:"preset1",control:r.a.createElement(N.a,null),label:"Preset 1"}),r.a.createElement(J.a,{variant:"preset1"===le?"rounded":"circle",alt:"preset0",src:U,className:e.avatar})),r.a.createElement(P.a,{mr:2},r.a.createElement(C.a,{value:"custom",control:r.a.createElement(N.a,null),label:"Custom"}),r.a.createElement(P.a,null,r.a.createElement(x.a,{type:"file",name:"image",onChange:function(e){console.log("handle","file"),console.log(e.target.files[0]),K(e.target.files[0]),me(URL.createObjectURL(e.target.files[0]))},disabled:"custom"!==le}))))))),r.a.createElement(h.a,null,r.a.createElement(b.a,{width:"100%",size:"large",color:"primary",onClick:We,disabled:"custom"===le&&!H||te},"Submit"),te&&r.a.createElement(k.a,null))),r.a.createElement(d.a,{className:e.root},r.a.createElement(T.a,null,r.a.createElement(L.a,{expandIcon:r.a.createElement(A.a,null),"aria-controls":"panel-content",id:"panel-header"},r.a.createElement(j.a,{className:e.heading},"Log ")),r.a.createElement(R.a,null,r.a.createElement(P.a,{flexDirection:"column"},Se&&Se.length&&Se.map((function(e,a){return r.a.createElement(P.a,{width:"90%",my:1,p:1,whiteSpace:"normal",bgcolor:"text.disabled",color:"background.paper",key:a},e)})))))),de&&0!==de.length&&r.a.createElement(d.a,{className:e.root},r.a.createElement(E.a,{title:"Profiling",subheader:"Total : ".concat(ve,"ms")}),r.a.createElement(g.a,null,de.map((function(e,a){return r.a.createElement(P.a,{display:"flex",alignItems:"center",key:a},r.a.createElement(P.a,{width:"100%",mr:1},r.a.createElement(I.a,{variant:"determinate",value:e[1]})),r.a.createElement(P.a,{minWidth:150},r.a.createElement(j.a,{variant:"body2",color:"textSecondary"},"".concat(e[1].toFixed(2),"%, ").concat(e[0],"ms"))))})))),Y.map((function(a,t){return r.a.createElement(d.a,{className:"".concat(e.root," ").concat(e.image),key:t},r.a.createElement(B.a,{href:"http://".concat(F.fe.ip_apiserver,":").concat(F.fe.port_apiserver,"/").concat(a),target:"_blank",rel:"noopener",color:"inherit"},r.a.createElement(v.a,{className:e.media,image:"http://".concat(F.fe.ip_apiserver,":").concat(F.fe.port_apiserver,"/").concat(a),title:a})),r.a.createElement(g.a,null,r.a.createElement(j.a,{gutterBottom:!0,variant:"h5",component:"h2"},a)))}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[75,1,2]]]);
//# sourceMappingURL=main.d9106472.chunk.js.map